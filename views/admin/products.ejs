<%- include ("../_layouts/adminheader") %>

    <div class="table-agile-info">
        <div class="panel panel-default">
            <div class="panel-heading">
                Product
            </div>
            <div class="row w3-res-tb">
            </div>
            <!-- count được lấy từ bên route, count bên trái, count property -->
            <% if (count > 0) { %>
            <div class="table-responsive">
                <table class="table table-striped b-t b-light sorting">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Price</th>
                            <th>Category</th>
                            <th>Image</th>
                            <th style="width:30px;"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <% products.forEach(function(product){ %>
                            <tr>
                                <td>
                                    <%= product.title %>
                                </td>
                                <td>
                                    $<%= parseFloat(product.price).toFixed(2) %>
                                    <!-- <%
                                        var numberFormat = new Intl.NumberFormat('vi-VN', {
                                            style: 'currency',
                                            currency: 'VND',
                                        });
                                        numberFormat.format(product.price);
                                    %> -->
                                </td>
                                <td>
                                    <%= product.category %>
                                </td>
                                <td>
                                    <% if (product.image == "") { %>
                                        <img id="noimage" src="../../../backend/images/images/noimage.jpg">
                                    <% } else {%>
                                        <img id="noimage" src="../../../backend/product_images/<%= product._id %>/<%= product.image %>">
                                    <% } %>
                                </td>
                                <td>
                                    <a href="/admin/products/edit-product/<%= product._id %>"
                                        class="active styling-edit"><i
                                            class="fa fa-pencil-square-o text-success text-active"></i></a>

                                    <a onclick="return confirm('Are you sure you want to delete this product?')"
                                        href="/admin/products/delete-product/<%= product._id %>" class="active styling-edit"><i
                                            class="fa fa-times text-danger text"></i></a>
                                </td>
                            </tr>
                            <% }); %>
                    </tbody>
                </table>
            </div>
            <% } else { %>
                <h3 class="text-center">No products, updating...</h3><br>
            <% } %>
            <footer class="panel-footer">
                <div class="row">

                    <div class="col-sm-5 text-center">
                        <small class="text-muted inline m-t-sm m-b-sm"></small>
                    </div>
                    <div class="col-sm-7 text-right text-center-xs">
                        <ul class="pagination pagination-sm m-t-none m-b-none">

                        </ul>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <!-- <script>
        var numberFormat = new Intl.NumberFormat('vi-VN', {
            style: 'currency',
            currency: 'VND',
        });
    </script> -->
    <!-- <script src="../../../backend/images/images/noimage.jpg"></script> -->
    <%- include ("../_layouts/adminfooter") %>